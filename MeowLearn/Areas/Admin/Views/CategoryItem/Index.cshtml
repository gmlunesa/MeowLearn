@model IEnumerable<MeowLearn.Entities.CategoryItem>

@{
    ViewData["Title"] = "Category Items";
}

<h1>Index</h1>

<p>
    @*Pass the CategoryId when creating a new CategoryItem*@
    <partial name="_CreateButtonPartial" model="@ViewBag.CategoryId" />
</p>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ReleaseDate)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ReleaseDate)
            </td>
            <td>
                <partial name="_FunctionButtonsPartial" model="@item.Id" />
                @*Pass CategoryId and CategoryItemId to the Create/Edit Content views*@
                @if (item.ContentId == 0)
                {
                    <a  class="text-warning function-button mr-2" 
                        title="Add Content"
                        asp-controller="Content" 
                        asp-action="Create" 
                        asp-route-categoryItemId="@item.Id" 
                        asp-route-categoryId="@item.CategoryId"
                    >                    
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </a>
                }
                else
                {
                    <a  class="text-warning function-button mr-2" 
                        title="Update Content"
                        asp-controller="Content" 
                        asp-action="Edit" 
                        asp-route-categoryItemId="@item.Id" 
                        asp-route-categoryId="@item.CategoryId"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z" />
                        </svg>
                    </a>
                }
            </td>
        </tr>
}
    </tbody>
</table>
